{"version":3,"sources":["Components/MovieItem.jsx","Components/MovieTabs.jsx","Components/App.jsx","utils/api.js","index.js"],"names":["MovieItem","state","willWatch","this","props","movie","removeMovie","addMovieToWillWatch","removeMovieFromWillWatch","className","src","backdrop_path","poster_path","alt","title","vote_average","type","onClick","setState","React","Component","MovieTabs","nextProps","nextState","console","log","sort_by","updateSortBy","handleClick","value","getClassByValue","App","getMovies","fetch","page","then","response","json","data","movies","results","total_pages","updateMovies","filter","item","id","updateMoviesWillWatch","moviesWillWatch","updatePage","handleChangePage","prevProps","prevState","map","key","length","ReactDOM","render","document","getElementById"],"mappings":"4MAwEeA,E,YArEb,aAAe,IAAD,8BACZ,+CAEKC,MAAQ,CACXC,WAAW,GAJD,E,sEAcJ,IAAD,SACuEC,KAAKC,MAA3EC,EADD,EACCA,MAAOC,EADR,EACQA,YAAaC,EADrB,EACqBA,oBAAqBC,EAD1C,EAC0CA,yBAEjD,OACE,yBAAKC,UAAU,QACb,yBACEA,UAAU,eACVC,IAAG,yCAAoCL,EAAMM,eAAiBN,EAAMO,aACpEC,IAAI,KAEN,yBAAKJ,UAAU,aACb,wBAAIA,UAAU,cAAcJ,EAAMS,OAClC,yBAAKL,UAAU,qDACb,uBAAGA,UAAU,QAAb,YAA8BJ,EAAMU,cACnCZ,KAAKF,MAAMC,UACV,4BACEc,KAAK,SACLP,UAAU,kBACVQ,QAAS,WACP,EAAKC,SAAS,CACZhB,WAAW,IAEbM,EAAyBH,KAP7B,qBAaA,4BACEW,KAAK,SACLP,UAAU,oBACVQ,QAAS,WACP,EAAKC,SAAS,CACZhB,WAAW,IAEbK,EAAoBF,KAPxB,eAcJ,4BACEY,QAAS,WACPX,EAAYD,KAFhB,sB,GAzDcc,IAAMC,WCyDfC,E,kMAxDaC,EAAWC,GACnCC,QAAQC,IAAI,8BACZD,QAAQC,IAAI,oBAAqBH,EAAUI,SAC3CF,QAAQC,IAAI,oBAAqBtB,KAAKC,MAAMsB,W,4CAGxBJ,EAAWC,GAC/B,OAAID,EAAUI,UAAYvB,KAAKC,MAAMsB,U,+BAM7B,IAAD,EAC2BvB,KAAKC,MAA/BsB,EADD,EACCA,QAASC,EADV,EACUA,aAEXC,EAAc,SAAAC,GAClB,OAAO,WACLF,EAAaE,KAIXC,EAAkB,SAAAD,GACtB,MAAM,YAAN,OAAmBH,IAAYG,EAAQ,SAAW,KAKpD,OAFAL,QAAQC,IAAI,oBAGV,wBAAIhB,UAAU,sBACZ,wBAAIA,UAAU,YACZ,yBACEA,UAAWqB,EAAgB,mBAC3Bb,QAASW,EAAY,oBAFvB,iBAOF,wBAAInB,UAAU,YACZ,yBAAKA,UAAWqB,EAAgB,gBAAiBb,QAASW,EAAY,iBAAtE,iBAIF,wBAAInB,UAAU,YACZ,yBACEA,UAAWqB,EAAgB,qBAC3Bb,QAASW,EAAY,sBAFvB,2B,GA7CcT,IAAMC,WCyJfW,E,YAlJb,aAAe,IAAD,8BACZ,+CA2BFC,UAAY,WACVC,MAAM,GAAD,OCtCc,+BDsCd,mCCpCgB,mCDoChB,oBACuD,EAAKhC,MAAMyB,QADlE,iBACkF,EAAKzB,MAAMiC,OAE/FC,MAAK,SAAAC,GACJ,OAAOA,EAASC,UAEjBF,MAAK,SAAAG,GACJd,QAAQC,IAAI,wBAAyBa,GACrC,EAAKpB,SAAS,CACZqB,OAAQD,EAAKE,QACbC,YAAaH,EAAKG,kBAvCZ,EA4CdnC,YAAc,SAAAD,GACZ,IAAMqC,EAAe,EAAKzC,MAAMsC,OAAOI,QAAO,SAAAC,GAC5C,OAAOA,EAAKC,KAAOxC,EAAMwC,MAG3B,EAAK3B,SAAS,CACZqB,OAAQG,KAlDE,EAsDdnC,oBAAsB,SAAAF,GAEpB,IAAMyC,EAAqB,sBAAO,EAAK7C,MAAM8C,iBAAlB,CAAmC1C,IAE9D,EAAKa,SAAS,CACZ6B,gBAAiBD,KA3DP,EA+DdtC,yBAA2B,SAAAH,GAEzB,IAAMyC,EAAwB,EAAK7C,MAAM8C,gBAAgBJ,QAAO,SAAAC,GAC9D,OAAOA,EAAKC,KAAOxC,EAAMwC,MAG3B,EAAK3B,SAAS,CACZ6B,gBAAiBD,KAtEP,EA0EdE,WAAa,SAAAnB,GACX,EAAKX,SAAS,CACZgB,KAAM,EAAKjC,MAAMiC,KAAOL,KA5Ed,EAgFdoB,iBAAmB,SAAApB,GACjB,OAAO,WACL,EAAKmB,WAAWnB,GAChB,EAAKG,cAnFK,EAuFdL,aAAe,SAAAE,GACb,EAAKX,SAAS,CACZQ,QAASG,KAtFX,EAAK5B,MAAQ,CACXsC,OAAQ,GACRQ,gBAAiB,GACjBrB,QAAS,kBACTQ,KAAM,EACNO,YAAa,GARH,E,iFAaZjB,QAAQC,IAAI,gBACZtB,KAAK6B,c,yCAIYkB,EAAWC,GAC5B3B,QAAQC,IAAI,iBAGR0B,EAAUzB,UAAYvB,KAAKF,MAAMyB,UACnCF,QAAQC,IAAI,gBACZtB,KAAK6B,e,+BAqEC,IAAD,OAEP,OADAR,QAAQC,IAAI,aAActB,KAAKF,MAAOE,MAEpC,yBAAKM,UAAU,aACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,SACb,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,UACb,kBAAC,EAAD,CAAWiB,QAASvB,KAAKF,MAAMyB,QAASC,aAAcxB,KAAKwB,iBAG/D,yBAAKlB,UAAU,YACb,yBAAKA,UAAU,UACb,4CAAkBN,KAAKF,MAAMiC,MAC7B,2CAAiB/B,KAAKF,MAAMwC,aAC5B,4BAAQxB,QAASd,KAAK8C,iBAAiB,IAAvC,aACA,4BAAQhC,QAASd,KAAK8C,kBAAkB,IAAxC,mBAGJ,yBAAKxC,UAAU,OACZN,KAAKF,MAAMsC,OAAOa,KAAI,SAAA/C,GACrB,OACE,yBAAKI,UAAU,aAAa4C,IAAKhD,EAAMwC,IACrC,kBAAC,EAAD,CACExC,MAAOA,EACPC,YAAa,EAAKA,YAClBC,oBAAqB,EAAKA,oBAC1BC,yBAA0B,EAAKA,iCAO3C,yBAAKC,UAAU,SACb,0CAAgBN,KAAKF,MAAM8C,gBAAgBO,OAA3C,WACA,wBAAI7C,UAAU,cACXN,KAAKF,MAAM8C,gBAAgBK,KAAI,SAAA/C,GAAK,OACnC,wBAAIgD,IAAKhD,EAAMwC,GAAIpC,UAAU,mBAC3B,yBAAKA,UAAU,kCACb,2BAAIJ,EAAMS,OACV,2BAAIT,EAAMU,2B,GAvIZI,IAAMC,WEHxBmC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.e5c81377.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nclass MovieItem extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      willWatch: false\r\n    };\r\n  }\r\n\r\n  //   handleWillWatch = () => {\r\n  //       this.setState({\r\n  //           willWatch: !this.state.willWatch\r\n  //       });\r\n  //   };\r\n\r\n  render() {\r\n    const { movie, removeMovie, addMovieToWillWatch, removeMovieFromWillWatch } = this.props;\r\n\r\n    return (\r\n      <div className=\"card\">\r\n        <img\r\n          className=\"card-img-top\"\r\n          src={`https://image.tmdb.org/t/p/w500${movie.backdrop_path || movie.poster_path}`}\r\n          alt=\"\"\r\n        />\r\n        <div className=\"card-body\">\r\n          <h6 className=\"card-title\">{movie.title}</h6>\r\n          <div className=\"d-flex justify-content-between align-items-center\">\r\n            <p className=\"mb-0\"> Rating: {movie.vote_average}</p>\r\n            {this.state.willWatch ? (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-success\"\r\n                onClick={() => {\r\n                  this.setState({\r\n                    willWatch: false\r\n                  });\r\n                  removeMovieFromWillWatch(movie);\r\n                }}\r\n              >\r\n                Remove Will Watch\r\n              </button>\r\n            ) : (\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n                onClick={() => {\r\n                  this.setState({\r\n                    willWatch: true\r\n                  });\r\n                  addMovieToWillWatch(movie);\r\n                }}\r\n              >\r\n                Will Watch\r\n              </button>\r\n            )}\r\n          </div>\r\n          <button\r\n            onClick={() => {\r\n              removeMovie(movie);\r\n            }}\r\n          >\r\n            Delete movie\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieItem;\r\n","import React from \"react\";\r\n\r\nclass MovieTabs extends React.Component {\r\n  componentWillReceiveProps(nextProps, nextState) {\r\n    console.log(\"MovieTabs WillReceiveProps\");\r\n    console.log(\"nextProps sort_by\", nextProps.sort_by);\r\n    console.log(\"prevProps sort_by\", this.props.sort_by);\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    if (nextProps.sort_by !== this.props.sort_by) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    const { sort_by, updateSortBy } = this.props;\r\n\r\n    const handleClick = value => {\r\n      return () => {\r\n        updateSortBy(value);\r\n      };\r\n    };\r\n\r\n    const getClassByValue = value => {\r\n      return `nav-link ${sort_by === value ? \"active\" : \"\"}`;\r\n    };\r\n\r\n    console.log(\"MovieTabs render\");\r\n\r\n    return (\r\n      <ul className=\"tabs nav nav-pills\">\r\n        <li className=\"nav-item\">\r\n          <div\r\n            className={getClassByValue(\"popularity.desc\")}\r\n            onClick={handleClick(\"popularity.desc\")}\r\n          >\r\n            Popular desc\r\n          </div>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <div className={getClassByValue(\"revenue.desc\")} onClick={handleClick(\"revenue.desc\")}>\r\n            Revenue desc\r\n          </div>\r\n        </li>\r\n        <li className=\"nav-item\">\r\n          <div\r\n            className={getClassByValue(\"vote_average.desc\")}\r\n            onClick={handleClick(\"vote_average.desc\")}\r\n          >\r\n            Vote average desc\r\n          </div>\r\n        </li>\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MovieTabs;\r\n","import React from \"react\";\r\n//import moviesData from \"../moviesData\";\r\nimport MovieItem from \"../Components/MovieItem\";\r\nimport { API_URL, API_KEY_3 } from \"../utils/api\";\r\nimport MovieTabs from \"./MovieTabs\";\r\n\r\n// UI = function(state, props)\r\n\r\nclass App extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      movies: [],\r\n      moviesWillWatch: [],\r\n      sort_by: \"popularity.desc\",\r\n      page: 1,\r\n      total_pages: 0\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(\"App didmount\");\r\n    this.getMovies();\r\n    // console.log(\"after fetch\");\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    console.log(\"App didUpdate\");\r\n    // console.log(\"prev data\", prevProps, prevState);\r\n    // console.log(\"this\", this.props, this.state);\r\n    if (prevState.sort_by !== this.state.sort_by) {\r\n      console.log(\"App call API\");\r\n      this.getMovies();\r\n    }\r\n  }\r\n\r\n  getMovies = () => {\r\n    fetch(\r\n      `${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`\r\n    )\r\n      .then(response => {\r\n        return response.json();\r\n      })\r\n      .then(data => {\r\n        console.log(\"get data from movieDB\", data);\r\n        this.setState({\r\n          movies: data.results,\r\n          total_pages: data.total_pages\r\n        });\r\n      });\r\n  };\r\n\r\n  removeMovie = movie => {\r\n    const updateMovies = this.state.movies.filter(item => {\r\n      return item.id !== movie.id;\r\n    });\r\n    // console.log(updateMovies);\r\n    this.setState({\r\n      movies: updateMovies\r\n    });\r\n  };\r\n\r\n  addMovieToWillWatch = movie => {    \r\n\r\n    const updateMoviesWillWatch = [...this.state.moviesWillWatch, movie];\r\n\r\n    this.setState({\r\n      moviesWillWatch: updateMoviesWillWatch\r\n    });\r\n  };\r\n\r\n  removeMovieFromWillWatch = movie => {\r\n    \r\n    const updateMoviesWillWatch = this.state.moviesWillWatch.filter(item => {\r\n      return item.id !== movie.id;\r\n    });\r\n\r\n    this.setState({\r\n      moviesWillWatch: updateMoviesWillWatch\r\n    });\r\n  };\r\n\r\n  updatePage = value => {\r\n    this.setState({\r\n      page: this.state.page + value\r\n    });\r\n  };\r\n\r\n  handleChangePage = value => {\r\n    return () => {\r\n      this.updatePage(value);\r\n      this.getMovies();\r\n    };\r\n  };  \r\n\r\n  updateSortBy = value => {\r\n    this.setState({\r\n      sort_by: value\r\n    });\r\n  };\r\n\r\n  render() {\r\n    console.log(\"App render\", this.state, this);\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-9\">\r\n            <div className=\"row mb-4 mt-2\">\r\n              <div className=\"col-12\">\r\n                <MovieTabs sort_by={this.state.sort_by} updateSortBy={this.updateSortBy} />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mb-4\">\r\n              <div className=\"col-12\">\r\n                <p>Current page: {this.state.page}</p>\r\n                <p>Total pages: {this.state.total_pages}</p>\r\n                <button onClick={this.handleChangePage(1)}>Next page</button>\r\n                <button onClick={this.handleChangePage(-1)}>Previous Page</button>\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              {this.state.movies.map(movie => {\r\n                return (\r\n                  <div className=\"col-6 mb-4\" key={movie.id}>\r\n                    <MovieItem\r\n                      movie={movie}\r\n                      removeMovie={this.removeMovie}\r\n                      addMovieToWillWatch={this.addMovieToWillWatch}\r\n                      removeMovieFromWillWatch={this.removeMovieFromWillWatch}\r\n                    />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          <div className=\"col-3\">\r\n            <p>Will Watch: {this.state.moviesWillWatch.length} movies</p>\r\n            <ul className=\"list-group\">\r\n              {this.state.moviesWillWatch.map(movie => (\r\n                <li key={movie.id} className=\"list-group-item\">\r\n                  <div className=\"d-flex justify-content-between\">\r\n                    <p>{movie.title}</p>\r\n                    <p>{movie.vote_average}</p>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","export const API_URL = \"https://api.themoviedb.org/3\";\r\n\r\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";\r\n\r\nexport const API_KEY_4 =\r\n  \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIzZjRjYTRmM2E5NzUwZGE1MzQ1MDY0NmNlZDMxMjM5NyIsInN1YiI6IjVhYzlmNWRkOTI1MTQxNjJhZTA1Njk0NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.Fc4f9DVB6pFWh6hIjYe0NCC4pImdmNzDIfi_3Nb3tC4\";\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport App from \"./Components/App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}